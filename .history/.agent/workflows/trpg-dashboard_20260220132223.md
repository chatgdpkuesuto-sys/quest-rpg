---
description: まちゃだんTRPGダッシュボードの開発フロー
---

# TRPG ゲームループ（正しい進め方）

## 大前提
- **プレイヤー**がダッシュボードで操作する
- **GM（アンチグラビティ）**がその結果を考えて返す
- セリフは**全部VOICEVOXで喋らせる**
- これはTRPGなので、ゲームロジックはbridge.pyに入れない。GMが毎回判断する

## 1ターンの流れ

```
プレイヤー（ダッシュボード操作）
    ↓ ボタンクリック / 選択
bridge.py（中継のみ）
    ↓ player_action.json に保存
    ↓ trigger_pulse.py を実行
アンチグラビティ（GM）が起動
    ↓ player_action.json を読む
    ↓ コアエンジンのルールに従って考える
    ↓ 次のシーンの index.html を書く
    ↓ voice_engine.py でセリフを音声化
ダッシュボードに新しいシーンが映る + ボイス再生
    ↓
プレイヤーが次の操作をする（繰り返し）
```

## ファイル構成（最小）
- `index.html` — 今のシーンの画面（毎回GMが書き換える）
- `bridge.py` — 中継サーバー（操作を受け取ってファイルに保存→パルス送信のみ）
- `player_action.json` — プレイヤーの最新操作
- `outputs/voice.wav` — 最新のボイス

## GMの仕事（毎ターン）
1. `player_action.json` を読む
2. コアエンジン（`00_Core_Engine/`）のルールを参照
3. 次のシーンを `index.html` に書く（エフェクトもりもり）
4. セリフを `voice_engine.py` で音声化
5. 結果のフォーマットをテンプレとして保存（必要なら）

## Phase 0 の進行順序（コアエンジン準拠）
1. ステータス割り振り（3ポイント）
2. ジョブ選択（ステータスに対応）
3. 装備選択
4. パーソナリティ設定
5. パートナー選択（プロローグ）
6. → Phase 1 へ
